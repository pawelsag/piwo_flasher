# set proper files name
SET(LINKER_SCRIPT ${CMAKE_SOURCE_DIR}/stm32f103/STM32F103C8Tx_FLASH.ld PARENT_SCOPE)
SET(BOOT_FILE  ${CMAKE_SOURCE_DIR}/stm32f103/startup_stm32f103xb.s PARENT_SCOPE)

set(target_INCLUDE_DIRS
  ${CMAKE_CURRENT_SOURCE_DIR}/Core/Inc
  ${CMAKE_CURRENT_SOURCE_DIR}/USB_Target
  ${CMAKE_CURRENT_SOURCE_DIR}/Middlewares/Inc
  ${CMAKE_CURRENT_SOURCE_DIR}/Drivers/STM32F1xx_HAL_Driver/Inc
  ${CMAKE_CURRENT_SOURCE_DIR}/Drivers/STM32F1xx_HAL_Driver/Inc/Legacy
  ${CMAKE_CURRENT_SOURCE_DIR}/Drivers/CMSIS/Device/ST/STM32F1xx/Include
  ${CMAKE_CURRENT_SOURCE_DIR}/Drivers/CMSIS/Include
  PARENT_SCOPE
)

file(GLOB_RECURSE MAIN_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/Core/Src/*.c)
file(GLOB_RECURSE MIDDLEWARES_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/Middlewares/Src/*.c*)
file(GLOB_RECURSE USB_TARGET_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/USB_Target/*.c*)
file(GLOB_RECURSE HAL_SRC ${CMAKE_CURRENT_SOURCE_DIR}/Drivers/STM32F1xx_HAL_Driver/Src/*.c*)

set(target_SOURCES
  ${USB_TARGET_SOURCES}
  ${HAL_SRC}
  ${MIDDLEWARES_SOURCES}
  ${MAIN_SOURCES}
  PARENT_SCOPE
)
